{"ast":null,"code":"import{io}from\"socket.io-client\";import{insertReceiver,onlineUpdate}from\"../context/reducer/userReducer\";export const socketClient=io(\"http://localhost:5000\",{reconnection:true,reconnectionAttempts:5,reconnectionDelay:1000,withCredentials:true,autoConnect:false,extraHeaders:{\"my-custom-header\":\"abcd\"}});export const userSocket=(socket,dispatch,user)=>{socketClient.auth={user};socketClient.connect();// 친구의 온라인 오프라인 상태\nsocket.on(\"online friend\",data=>dispatch(onlineUpdate(data)));// 요청자가 친구추가를 받아줬을때\nsocket.on(\"receiver data\",receiver=>{dispatch(insertReceiver(receiver));});};","map":{"version":3,"names":["io","insertReceiver","onlineUpdate","socketClient","reconnection","reconnectionAttempts","reconnectionDelay","withCredentials","autoConnect","extraHeaders","userSocket","socket","dispatch","user","auth","connect","on","data","receiver"],"sources":["C:/Users/ashh1/Desktop/project/PlayWithFriends/client/src/util/socket.ts"],"sourcesContent":["import { io, Socket } from \"socket.io-client\";\r\nimport { User } from \"../types/user\";\r\nimport { AppDispatch } from \"../context/store\";\r\nimport { insertReceiver, onlineUpdate } from \"../context/reducer/userReducer\";\r\n\r\nexport const socketClient: Socket = io(\"http://localhost:5000\", {\r\n  reconnection: true,\r\n  reconnectionAttempts: 5,\r\n  reconnectionDelay: 1000,\r\n  withCredentials: true,\r\n  autoConnect: false,\r\n  extraHeaders: {\r\n    \"my-custom-header\": \"abcd\",\r\n  },\r\n});\r\n\r\nexport const userSocket = (\r\n  socket: Socket,\r\n  dispatch: AppDispatch,\r\n  user: User\r\n) => {\r\n  socketClient.auth = {\r\n    user,\r\n  };\r\n  socketClient.connect();\r\n\r\n  // 친구의 온라인 오프라인 상태\r\n  socket.on(\"online friend\", (data: User) => dispatch(onlineUpdate(data)));\r\n\r\n  // 요청자가 친구추가를 받아줬을때\r\n  socket.on(\"receiver data\", (receiver: User) => {\r\n    dispatch(insertReceiver(receiver));\r\n  });\r\n};\r\n"],"mappings":"AAAA,OAASA,EAAE,KAAgB,kBAAkB,CAG7C,OAASC,cAAc,CAAEC,YAAY,KAAQ,gCAAgC,CAE7E,MAAO,MAAM,CAAAC,YAAoB,CAAGH,EAAE,CAAC,uBAAuB,CAAE,CAC9DI,YAAY,CAAE,IAAI,CAClBC,oBAAoB,CAAE,CAAC,CACvBC,iBAAiB,CAAE,IAAI,CACvBC,eAAe,CAAE,IAAI,CACrBC,WAAW,CAAE,KAAK,CAClBC,YAAY,CAAE,CACZ,kBAAkB,CAAE,MACtB,CACF,CAAC,CAAC,CAEF,MAAO,MAAM,CAAAC,UAAU,CAAGA,CACxBC,MAAc,CACdC,QAAqB,CACrBC,IAAU,GACP,CACHV,YAAY,CAACW,IAAI,CAAG,CAClBD,IACF,CAAC,CACDV,YAAY,CAACY,OAAO,CAAC,CAAC,CAEtB;AACAJ,MAAM,CAACK,EAAE,CAAC,eAAe,CAAGC,IAAU,EAAKL,QAAQ,CAACV,YAAY,CAACe,IAAI,CAAC,CAAC,CAAC,CAExE;AACAN,MAAM,CAACK,EAAE,CAAC,eAAe,CAAGE,QAAc,EAAK,CAC7CN,QAAQ,CAACX,cAAc,CAACiB,QAAQ,CAAC,CAAC,CACpC,CAAC,CAAC,CACJ,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}