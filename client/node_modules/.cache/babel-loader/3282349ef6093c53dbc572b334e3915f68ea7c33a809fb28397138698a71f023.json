{"ast":null,"code":"// css\nimport\"../css/pageheader.css\";import React,{useState}from\"react\";import{Link,useNavigate}from\"react-router-dom\";import{userInit}from\"../context/reducer/userReducer\";import{emitter}from\"../util/event\";import{useSelector}from\"react-redux\";import{persistor}from\"../context/store\";import{socketClient}from\"../util/socket\";import{useDispatch}from\"react-redux\";import{auth_service}from\"../service/auth.service\";import{jsxs as _jsxs,jsx as _jsx}from\"react/jsx-runtime\";export const PageHeader=()=>{let navigate=useNavigate();let user=useSelector(state=>state.user);let dispatch=useDispatch();let[userOption,setUserOption]=useState(false);const logout=async()=>{try{await auth_service.logout();dispatch(userInit());await persistor.purge();socketClient.disconnect();navigate(\"/login\");}catch(err){console.log(err);throw err;}};return/*#__PURE__*/_jsxs(\"header\",{className:\"pwf_header\",children:[/*#__PURE__*/_jsx(\"span\",{children:/*#__PURE__*/_jsxs(Link,{to:\"/\",className:\"home_anchor\",children:[\"PWF \",user.nickname]})}),/*#__PURE__*/_jsxs(\"div\",{className:\"header_control\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pwf_friend_box\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"friend_btn\",onClick:()=>emitter.emit(\"modal\",{type:\"friend\",open:true}),children:/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-user-plus\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"friend_add_number\",style:{display:user.request_friends&&user.request_friends.length?\"flex\":\"none\"},children:user.request_friends&&user.request_friends.length?user.request_friends.length:\"\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pwf_user_box\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"pwf_user_btn\",onFocus:()=>setUserOption(true),onBlur:()=>setUserOption(false),children:/*#__PURE__*/_jsx(\"img\",{src:user.profile_img})}),/*#__PURE__*/_jsxs(\"div\",{className:\"check_box\",style:{display:userOption?\"flex\":\"none\"},children:[/*#__PURE__*/_jsxs(\"button\",{onMouseDown:()=>navigate(`/profile/${user.email}`),children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-user\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uD504\\uB85C\\uD544\"})]}),/*#__PURE__*/_jsxs(\"button\",{onMouseDown:logout,children:[/*#__PURE__*/_jsx(\"i\",{className:\"fa-solid fa-right-from-bracket\"}),/*#__PURE__*/_jsx(\"span\",{children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"})]})]})]})]})]});};","map":{"version":3,"names":["React","useState","Link","useNavigate","userInit","emitter","useSelector","persistor","socketClient","useDispatch","auth_service","jsxs","_jsxs","jsx","_jsx","PageHeader","navigate","user","state","dispatch","userOption","setUserOption","logout","purge","disconnect","err","console","log","className","children","to","nickname","onClick","emit","type","open","style","display","request_friends","length","onFocus","onBlur","src","profile_img","onMouseDown","email"],"sources":["C:/Users/ashh1/Desktop/project/PlayWithFriends/client/src/components/pageHeader.tsx"],"sourcesContent":["// css\r\nimport { profile } from \"console\";\r\nimport \"../css/pageheader.css\";\r\n\r\nimport React, { memo, useEffect, useState } from \"react\";\r\nimport { Link, useNavigate } from \"react-router-dom\";\r\nimport { userInit } from \"../context/reducer/userReducer\";\r\n\r\nimport { emitter } from \"../util/event\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { AppDispatch, persistor, RootState } from \"../context/store\";\r\nimport { socketClient } from \"../util/socket\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { auth_service } from \"../service/auth.service\";\r\n\r\nexport const PageHeader = () => {\r\n  let navigate = useNavigate();\r\n  let user = useSelector((state: RootState) => state.user);\r\n  let dispatch = useDispatch<AppDispatch>();\r\n  let [userOption, setUserOption] = useState<boolean>(false);\r\n\r\n  const logout = async () => {\r\n    try {\r\n      await auth_service.logout();\r\n      dispatch(userInit());\r\n      await persistor.purge();\r\n      socketClient.disconnect();\r\n      navigate(\"/login\");\r\n    } catch (err) {\r\n      console.log(err);\r\n      throw err;\r\n    }\r\n  };\r\n\r\n  return (\r\n    <header className=\"pwf_header\">\r\n      <span>\r\n        <Link to=\"/\" className=\"home_anchor\">\r\n          PWF {user.nickname}\r\n        </Link>\r\n      </span>\r\n\r\n      <div className=\"header_control\">\r\n        {/* 친구추가 */}\r\n        <div className=\"pwf_friend_box\">\r\n          <button\r\n            className=\"friend_btn\"\r\n            onClick={() =>\r\n              emitter.emit(\"modal\", { type: \"friend\", open: true })\r\n            }\r\n          >\r\n            <i className=\"fa-solid fa-user-plus\"></i>\r\n          </button>\r\n\r\n          <span\r\n            className=\"friend_add_number\"\r\n            style={{\r\n              display:\r\n                user.request_friends && user.request_friends.length\r\n                  ? \"flex\"\r\n                  : \"none\",\r\n            }}\r\n          >\r\n            {user.request_friends && user.request_friends.length\r\n              ? user.request_friends.length\r\n              : \"\"}\r\n          </span>\r\n        </div>\r\n\r\n        {/* 유저 프로필 */}\r\n        <div className=\"pwf_user_box\">\r\n          <button\r\n            className=\"pwf_user_btn\"\r\n            onFocus={() => setUserOption(true)}\r\n            onBlur={() => setUserOption(false)}\r\n          >\r\n            <img src={user.profile_img} />\r\n          </button>\r\n\r\n          <div\r\n            className=\"check_box\"\r\n            style={{ display: userOption ? \"flex\" : \"none\" }}\r\n          >\r\n            <button onMouseDown={() => navigate(`/profile/${user.email}`)}>\r\n              <i className=\"fa-solid fa-user\"></i>\r\n              <span>프로필</span>\r\n            </button>\r\n            <button onMouseDown={logout}>\r\n              <i className=\"fa-solid fa-right-from-bracket\"></i>\r\n              <span>로그아웃</span>\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </header>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}