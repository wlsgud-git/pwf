{"ast":null,"code":"import\"../../css/modal/pwFind.css\";import{emitter}from\"../../util/event\";import{useState}from\"react\";import{user_service}from\"../../service/user.service\";import{createFormData}from\"../../util/form\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const PwFind=_ref=>{let{user,type}=_ref;let initState={error:false,error_msg:\"\",value:\"\",show:false};let[password,setPassword]=useState(initState);let[passwordCheck,setPasswordCheck]=useState(initState);let submit=async e=>{e.preventDefault();if(password.value==\"\"||password.error||passwordCheck.value==\"\"||passwordCheck.error){alert(\"값을 정확히 입력해야 합니다.\");return;}try{let res=await user_service.passwordChange(createFormData({email:user.email,password:password.value}));alert(res.message);reset();}catch(err){console.log(err);}};let reset=()=>{setPassword(initState);setPasswordCheck(initState);emitter.emit(\"modal\",{type});};// 비밀번호 확인값 검증\nlet passwordCheckValidate=e=>{let value=e.target.value;let valid=password.value===value;setPasswordCheck(c=>({...c,value,error:!valid,error_msg:valid?\"\":\"비밀번호와 값이 일치하지 않습니다\"}));};return/*#__PURE__*/_jsxs(\"div\",{className:\"pw_find_modal\",style:{display:type==\"password\"?\"flex\":\"none\"},children:[/*#__PURE__*/_jsx(\"header\",{className:\"modal_header\",children:/*#__PURE__*/_jsx(\"button\",{onClick:reset,children:\"X\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"pw_find_box\",children:/*#__PURE__*/_jsxs(\"form\",{className:\"pw_find_form\",onSubmit:submit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pw_find_info_box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pw_find_input_box\",style:{border:`1px solid ${password.error?\"red\":\"gray\"}`},children:[/*#__PURE__*/_jsx(\"input\",{type:password.show?\"text\":\"password\",placeholder:\"\\uC0C8 \\uBE44\\uBC00\\uBC88\\uD638\",value:password.value,onChange:e=>setPassword(c=>({...c,value:e.target.value})),onFocus:()=>setPassword(c=>({...c,error:false}))// onBlur={() => passwordValidate(password.value, setPassword)}\n}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setPassword(c=>({...c,show:!c.show})),children:/*#__PURE__*/_jsx(\"i\",{className:`fa-solid fa-eye${password.show?\"-slash\":\"\"}`})})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:password.error?\"block\":\"none\"},className:\"pw_find_error_box\",children:password.error_msg})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"pw_find_info_box\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"pw_find_input_box\",style:{border:`1px solid ${passwordCheck.error?\"red\":\"gray\"}`},children:[/*#__PURE__*/_jsx(\"input\",{type:passwordCheck.show?\"text\":\"password\",placeholder:\"\\uC0C8 \\uBE44\\uBC00\\uBC88\\uD654 \\uD655\\uC778\",value:passwordCheck.value,onChange:passwordCheckValidate}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:()=>setPasswordCheck(c=>({...c,show:!c.show})),children:/*#__PURE__*/_jsx(\"i\",{className:`fa-solid fa-eye${passwordCheck.show?\"-slash\":\"\"}`})})]}),/*#__PURE__*/_jsx(\"div\",{style:{display:passwordCheck.error?\"block\":\"none\"},className:\"pw_find_error_box\",children:passwordCheck.error_msg})]}),/*#__PURE__*/_jsx(\"button\",{className:\"pw_find_btn\",children:\"\\uBCC0\\uACBD\\uD558\\uAE30\"})]})})]});};","map":{"version":3,"names":["emitter","useState","user_service","createFormData","jsx","_jsx","jsxs","_jsxs","PwFind","_ref","user","type","initState","error","error_msg","value","show","password","setPassword","passwordCheck","setPasswordCheck","submit","e","preventDefault","alert","res","passwordChange","email","message","reset","err","console","log","emit","passwordCheckValidate","target","valid","c","className","style","display","children","onClick","onSubmit","border","placeholder","onChange","onFocus"],"sources":["C:/Users/ashh1/Desktop/project/PlayWithFriends/client/src/components/modal/pwFind.tsx"],"sourcesContent":["import \"../../css/modal/pwFind.css\";\r\n\r\nimport { User } from \"../../types/user\";\r\nimport { ModalList } from \"../../page/modal\";\r\n\r\nimport { emitter } from \"../../util/event\";\r\nimport { FormEvent, useState } from \"react\";\r\nimport { InputChange } from \"../../types/event\";\r\nimport { emailValidate } from \"../../validation/auth\";\r\nimport { user_service } from \"../../service/user.service\";\r\nimport { createFormData } from \"../../util/form\";\r\n\r\ninterface PwFindProps {\r\n  user: User;\r\n  type: ModalList;\r\n}\r\n\r\ninterface InputProps {\r\n  error: boolean;\r\n  error_msg: string;\r\n  value: string;\r\n  show?: boolean;\r\n}\r\n\r\nexport const PwFind = ({ user, type }: PwFindProps) => {\r\n  let initState = {\r\n    error: false,\r\n    error_msg: \"\",\r\n    value: \"\",\r\n    show: false,\r\n  };\r\n  let [password, setPassword] = useState<InputProps>(initState);\r\n  let [passwordCheck, setPasswordCheck] = useState<InputProps>(initState);\r\n\r\n  let submit = async (e: FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (\r\n      password.value == \"\" ||\r\n      password.error ||\r\n      passwordCheck.value == \"\" ||\r\n      passwordCheck.error\r\n    ) {\r\n      alert(\"값을 정확히 입력해야 합니다.\");\r\n      return;\r\n    }\r\n    try {\r\n      let res = await user_service.passwordChange(\r\n        createFormData({ email: user.email, password: password.value })\r\n      );\r\n\r\n      alert(res.message);\r\n      reset();\r\n    } catch (err) {\r\n      console.log(err);\r\n    }\r\n  };\r\n\r\n  let reset = () => {\r\n    setPassword(initState);\r\n    setPasswordCheck(initState);\r\n    emitter.emit(\"modal\", { type });\r\n  };\r\n\r\n  // 비밀번호 확인값 검증\r\n  let passwordCheckValidate = (e: InputChange) => {\r\n    let value = e.target.value;\r\n    let valid = password.value === value;\r\n    setPasswordCheck((c) => ({\r\n      ...c,\r\n      value,\r\n      error: !valid,\r\n      error_msg: valid ? \"\" : \"비밀번호와 값이 일치하지 않습니다\",\r\n    }));\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"pw_find_modal\"\r\n      style={{ display: type == \"password\" ? \"flex\" : \"none\" }}\r\n    >\r\n      <header className=\"modal_header\">\r\n        <button onClick={reset}>X</button>\r\n      </header>\r\n\r\n      <div className=\"pw_find_box\">\r\n        <form className=\"pw_find_form\" onSubmit={submit}>\r\n          {/* password */}\r\n          <div className=\"pw_find_info_box\">\r\n            <div\r\n              className=\"pw_find_input_box\"\r\n              style={{\r\n                border: `1px solid ${password.error ? \"red\" : \"gray\"}`,\r\n              }}\r\n            >\r\n              <input\r\n                type={password.show ? \"text\" : \"password\"}\r\n                placeholder=\"새 비밀번호\"\r\n                value={password.value}\r\n                onChange={(e: InputChange) =>\r\n                  setPassword((c) => ({ ...c, value: e.target.value }))\r\n                }\r\n                onFocus={() => setPassword((c) => ({ ...c, error: false }))}\r\n                // onBlur={() => passwordValidate(password.value, setPassword)}\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setPassword((c) => ({ ...c, show: !c.show }))}\r\n              >\r\n                <i\r\n                  className={`fa-solid fa-eye${password.show ? \"-slash\" : \"\"}`}\r\n                ></i>\r\n              </button>\r\n            </div>\r\n            <div\r\n              style={{ display: password.error ? \"block\" : \"none\" }}\r\n              className=\"pw_find_error_box\"\r\n            >\r\n              {password.error_msg}\r\n            </div>\r\n          </div>\r\n          {/* password check */}\r\n          <div className=\"pw_find_info_box\">\r\n            <div\r\n              className=\"pw_find_input_box\"\r\n              style={{\r\n                border: `1px solid ${passwordCheck.error ? \"red\" : \"gray\"}`,\r\n              }}\r\n            >\r\n              <input\r\n                type={passwordCheck.show ? \"text\" : \"password\"}\r\n                placeholder=\"새 비밀번화 확인\"\r\n                value={passwordCheck.value}\r\n                onChange={passwordCheckValidate}\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                onClick={() =>\r\n                  setPasswordCheck((c) => ({ ...c, show: !c.show }))\r\n                }\r\n              >\r\n                <i\r\n                  className={`fa-solid fa-eye${\r\n                    passwordCheck.show ? \"-slash\" : \"\"\r\n                  }`}\r\n                ></i>\r\n              </button>\r\n            </div>\r\n            <div\r\n              style={{ display: passwordCheck.error ? \"block\" : \"none\" }}\r\n              className=\"pw_find_error_box\"\r\n            >\r\n              {passwordCheck.error_msg}\r\n            </div>\r\n          </div>\r\n          <button className=\"pw_find_btn\">변경하기</button>\r\n        </form>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}